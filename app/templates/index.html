<!DOCTYPE html>
<html>
    <head>
        <title>MES Project</title>

        <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='image/favicon.ico') }}">

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Include Twitter Bootstrap and jQuery: -->
        <link rel="stylesheet" href="{{ url_for('static', filename='docs/css/bootstrap-3.3.2.min.css') }}" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='docs/css/bootstrap-example.min.css') }}" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='docs/css/prettify.min.css') }}" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='docs/css/style.css') }}" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='dist/css/bootstrap-multiselect.css') }}" type="text/css"/>
        <link rel="stylesheet" href="//cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" type="text/css"/>

        <!--Include Javascript-->
        <script type="text/javascript" src="{{ url_for('static', filename='docs/js/jquery-2.1.3.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='docs/js/bootstrap-3.3.2.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='docs/js/prettify.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='docs/js/require.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static', filename='dist/js/bootstrap-multiselect.js') }}"></script>
        

        <script type="text/javascript" class="init">
            $(document).ready(function(){
                $('#default').multiselect();
                $('#theForm').submit(function(event) {
                    var selected = JSON.stringify($('#default').val());
                    $.ajax({
                        url : "{{ url_for('predict') }}",
                        type : "POST",
                        dataType : "json",
                        crossDomain : true,
                        data : '{"data":'+ selected +'}',
                        success : function(data) {console.log(data);}
                    }).done(function(data) {
                        //$('#write').text(data.columns.length).show();

                        var table =  $('#write');
			$('#myTable').remove();
                        var content = '<table id="myTable" class="table table-striped table-hover"><thead class = "black white-text">'+
                            '<tr><th scope="col">#</th>'+
                            '<th scope = "col">Disease Name</th>'+
                            '<th scope = "col">Probability</th></tr></thead>'+
                            '<tbody>';
                    for(i = 0; i<data.columns.length; i++) {
                        content += '<tr><th scope="row">'+ i +'</th>'+
                            '<td>'+ data.columns[i] +'</td>'+
                            '<td>'+ data.data[0][i] +'</td></tr>';
                    }
                    content += '</tbody></table>';
                    table.append(content);
                    });
                    event.preventDefault();
                    
                });

            });
        </script>

        <style>
            body{
                touch-action:none;
            }
        </style>
    </head>
    <body>
        <form action="" method="post" id ="theForm">
            <div style = "min-height:150px; height:auto; width:auto; background: #4db8ff; margin: 100px 200px; padding : 10px; border-radius:15px;">
            <h1 style="line-height:20px;">Disease diagnosis via Symptoms: </h1><br>
            
            <div class="stackblitz-container material">
                <div class="control-section">
                    <div class="control-wrapper">
                        <div id="content">
                            <div>
                                <span id = "">
                                    <select id="default" multiple="multiple"> 
                                        {% for i in cols %}
                                            <option id = "{{ i }}" value="{{ i }}">{{ i }}</option>
                                        {% endfor %}
                                    </select>
                                    <br>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <div style="margin: 0px 210px;">
                <button id="sub" type="submit" >SUBMIT</button>
            </div>
        <div id="write"></div>
        
        </form>
    </body>
</html>
